<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>ğŸ¦¾ Doosan Teststand â€” Advanced Simulation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="Assets/css/styles.css">
</head>
<body>
<header>ğŸ¦¾ Doosan Teststand â€” Advanced Simulation</header>

<main>
  <!-- LEFT: Scene -->
  <div class="card scene-card">
    <h2>Robot & Teststand (Simulation)</h2>
    <div class="scene-wrap">
      <!-- Scalable SVG workspace -->
      <svg id="svg" viewBox="0 0 800 450" width="100%" height="100%">
        <!-- Floor -->
        <rect x="0" y="350" width="800" height="100" fill="#e8edf5"/>
        <!-- Teststand (centered) -->
        <rect x="300" y="280" width="200" height="70" rx="8" fill="#ccd9ea" stroke="#9cb5d6"/>
        <rect x="340" y="260" width="120" height="20" rx="4" fill="#b7c8e1"/>
        <!-- Panel on stand (target) -->
        <!-- Panel at P1 (stack) - visible at start -->
        <rect id="panelStack" x="532" y="274" width="36" height="12" rx="2" fill="#2ecc71" opacity="1"/>
        <!-- Panel at P3 (on stand) - hidden at start -->
        <rect id="panelStand" x="370" y="274" width="60" height="12" rx="2" fill="#2ecc71" opacity="0"/>
        <!-- Pick area (stack) at P1 (right) -->
        <rect x="510" y="300" width="80" height="20" rx="4" fill="#dfe6ee" stroke="#c9d3e3"/>
        <rect x="520" y="280" width="60" height="16" rx="3" fill="#bfcde2"/>
        <!-- Drop-off area P4 (left) -->
        <rect x="210" y="300" width="80" height="20" rx="4" fill="#dfe6ee" stroke="#c9d3e3"/>
        <rect x="220" y="290" width="60" height="16" rx="3" fill="#bfcde2"/>
        <!-- Panel at P4 (hidden at start) -->
        <rect id="panelP4" x="232" y="292" width="36" height="12" rx="2" fill="#2ecc71" opacity="0"/>
        <!-- Markers -->
       <circle cx="550" cy="280" r="5" fill="#8e44ad"/>   <!-- P1 -->
       <circle cx="400" cy="240" r="5" fill="#16a085"/>   <!-- P2 -->
       <circle cx="400" cy="280" r="5" fill="#c0392b"/>   <!-- P3 -->
       <circle cx="250" cy="280" r="5" fill="#2980b9"/>   <!-- P4 -->

      <!-- ===== Robot (fancy 2D) ===== -->
<!-- Gradients & filters -->
<defs>
  <!-- Ù…Ø¹Ø¯Ù† ØºØ§Ù…Ù‚ -->
  <linearGradient id="armMetal" x1="0" y1="0" x2="1" y2="0">
    <stop offset="0"  stop-color="#0e1722"/>
    <stop offset="0.5" stop-color="#223041"/>
    <stop offset="1"  stop-color="#0c131b"/>
  </linearGradient>
  <!-- Ù„Ù…Ø¹Ø© Ø¬Ø§Ù†Ø¨ÙŠØ© -->
  <linearGradient id="armEdge" x1="0" y1="0" x2="0" y2="1">
    <stop offset="0" stop-color="rgba(255,255,255,.25)"/>
    <stop offset="1" stop-color="rgba(255,255,255,0)"/>
  </linearGradient>
  <!-- Ù…Ø¹Ø¯Ù† ÙØ§ØªØ­ Ù„Ù„Ù€gripper -->
  <linearGradient id="gripMetal" x1="0" y1="0" x2="1" y2="0">
    <stop offset="0"  stop-color="#7b8da0"/>
    <stop offset="1"  stop-color="#9fb0c2"/>
  </linearGradient>
  <!-- Ø¸Ù„ Ø®ÙÙŠÙ -->
  <filter id="softShadow" x="-30%" y="-30%" width="160%" height="160%">
    <feDropShadow dx="0" dy="2" stdDeviation="2" flood-color="#000" flood-opacity=".35"/>
  </filter>
  <!-- ØªÙˆÙ‡Ø¬ Ø£Ø®Ø¶Ø± Ø®ÙÙŠÙ Ù„Ù„Ø£Ø¶ÙˆØ§Ø¡ -->
  <filter id="softGlow" x="-40%" y="-40%" width="180%" height="180%">
    <feGaussianBlur stdDeviation="2" result="b"/>
    <feMerge>
      <feMergeNode in="b"/>
      <feMergeNode in="SourceGraphic"/>
    </feMerge>
  </filter>
</defs>

<!-- Robot base -->
<g id="robot" transform="translate(400,340)">
  <!-- Ù‚Ø§Ø¹Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¶ -->
  <g filter="url(#softShadow)">
    <rect x="-32" y="6" width="64" height="22" rx="8" fill="#3a4b61"/>
    <rect x="-22" y="0" width="44" height="18" rx="8" fill="#253447"/>
  </g>

  <!-- ===== Link1 ===== -->
  <g id="link1" transform="rotate(-60)">
    <!-- Ø¬Ø³Ù… Ø§Ù„Ø±Ø§Ø¨Ø· -->
    <g filter="url(#softShadow)">
      <rect x="0" y="-13" width="140" height="26" rx="13" fill="url(#armMetal)"/>
      <!-- Ù„Ù…Ø¹Ø© Ø¹Ù„ÙˆÙŠØ© -->
      <rect x="0" y="-13" width="140" height="10" rx="10" fill="url(#armEdge)" opacity=".35"/>
    </g>
    <!-- Ù…ÙØµÙ„1 -->
    <g>
      <circle cx="0" cy="0" r="13" fill="#0e1722" stroke="#3a4b61" stroke-width="3"/>
      <circle cx="0" cy="0" r="5"  fill="#7a90a8"/>
    </g>

    <!-- ===== Link2 ===== -->
    <g id="link2" transform="translate(140,0) rotate(40)">
      <g filter="url(#softShadow)">
        <rect x="0" y="-11" width="120" height="22" rx="11" fill="url(#armMetal)"/>
        <rect x="0" y="-11" width="120" height="8"  rx="8"  fill="url(#armEdge)" opacity=".35"/>
      </g>
      <!-- Ù…ÙØµÙ„2 -->
      <g>
        <circle cx="0" cy="0" r="11" fill="#0e1722" stroke="#3a4b61" stroke-width="3"/>
        <circle cx="0" cy="0" r="4"  fill="#7a90a8"/>
      </g>

      <!-- ===== End Effector / Tool ===== -->
      <g id="tool" transform="translate(120,0)">
        <!-- Ø¬Ø³Ù… Ø§Ù„Ù…Ø§Ø³Ùƒ -->
        <g filter="url(#softShadow)">
          <rect x="-12" y="-18" width="24" height="36" rx="6" fill="url(#gripMetal)" stroke="#6b7c8e" stroke-width="1.5"/>
          <!-- Ø¨Ø±Ø§ØºÙŠ ØµØºÙŠØ±Ø© -->
          <circle cx="-6" cy="-10" r="1.4" fill="#4a5b6b"/>
          <circle cx=" 6" cy="-10" r="1.4" fill="#4a5b6b"/>
          <circle cx="-6" cy=" 10" r="1.4" fill="#4a5b6b"/>
          <circle cx=" 6" cy=" 10" r="1.4" fill="#4a5b6b"/>
        </g>

        <!-- Ø£ØµØ§Ø¨Ø¹ Ø§Ù„Ù…Ø§Ø³Ùƒ (Ù†ÙØ³ Ø§Ù„Ù€IDs Ø­ØªÙ‰ ÙŠÙØ¶Ù„ JS ÙŠØ®Ø¯Ù…) -->
        <rect id="fingerL" x="-18" y="-4" width="8" height="8" rx="2" fill="#9fb0c2" stroke="#6b7c8e" stroke-width="1"/>
        <rect id="fingerR" x="10"  y="-4" width="8" height="8" rx="2" fill="#9fb0c2" stroke="#6b7c8e" stroke-width="1"/>

        <!-- Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© (Ù†ÙØ³ ID) -->
        <rect id="panelCarry" x="-20" y="-6" width="40" height="12" rx="2" fill="#20e3b2" opacity="0" filter="url(#softGlow)"/>
      </g>
    </g>
  </g>
</g>
<!-- ===== end robot ===== -->
      </svg>     
      <!-- Legend / Info -->
<div class="legend">
  <span class="dot dot-pick"></span> P1 Pick
  <span class="dot dot-over"></span> P2 Over Stand
  <span class="dot dot-place"></span> P3 Place
  <span class="dot dot-store"></span> P4 Store
  <span style="margin-left:12px">Link lengths: L1=140, L2=120 (sim)</span>
</div>
<!-- ÙŠØ³ÙƒÙ‘Ø± Ø§Ù„Ù€ SVG -->
    </div>              <!-- ÙŠØ³ÙƒÙ‘Ø± .scene-wrap -->
  </div>                <!-- ÙŠØ³ÙƒÙ‘Ø± .card.scene-card -->

  <!-- RIGHT: Controls + LEDs -->
  <div class="card">
    <h2>Controls</h2>
    <div class="controls">
      <button id="btnRobot"  class="btn-robot"  type="button">RobotAt = 0</button>
      <button id="btnSensor" class="btn-sensor" type="button">Sensor = 0</button>
      <button id="btnAuto"   class="btn-auto"   type="button">Auto Cycle</button>
      <button id="btnStop"   class="btn-stop"   type="button" disabled>Stop</button>
    </div>
    <p class="hint">â€¢ ÙÙŠ ÙˆØ¶Ø¹ <b>Auto</b> Ø§Ù„Ø±ÙˆØ¨ÙˆØª ÙŠØªØ­Ø±Ù‘Ùƒ P1â†’P2â†’P3 ÙˆÙŠØ¹Ù…Ù„ Gripper ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.<br/>â€¢ Ø§Ù„Ø£Ø²Ø±Ø§Ø± RobotAt/Sensor Ù„Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„ÙŠØ¯ÙˆÙŠØ© (Ready ÙŠØ·Ù„Ù‚ Ø§Ù„Ø³ÙŠÙƒÙˆÙ†Ø³ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§).</p>

    <h2 style="margin-top:16px">Status LEDs</h2>
    <div class="row"><div id="led_robot" class="led"></div><div class="label">Robot At_Target</div></div>
    <div class="row"><div id="led_sensor" class="led"></div><div class="label">Panel Sensor</div></div>
    <div class="row"><div id="led_ready" class="led"></div><div class="label">Ready (Both=1)</div></div>

    <div class="row"><div id="led_flash" class="led"></div><div class="label">Flashing</div></div>
    <div class="progress">
      <div id="bar_flash" class="bar">
        <span id="txt_flash"></span>
      </div>
    </div>

    <div class="row"><div id="led_test" class="led"></div><div class="label">Testing</div></div>
    <div class="progress">
      <div id="bar_test" class="bar">
        <span id="txt_test"></span>
      </div>
    </div>

    <div class="row"><div id="led_ack" class="led"></div><div class="label">ACK to Robot</div></div>
  </div>

  <!-- Log -->
  <div class="card" style="grid-column:1 / -1">
    <h2>Event Log</h2>
    <div id="log"></div>
  </div>
        
</main>

<script src="Assets/js/app.js" defer></script>
</body>
</html>
